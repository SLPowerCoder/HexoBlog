---
title: iOS 深拷贝和浅拷贝
categories: iOS
tags: [深拷贝,浅拷贝]

---

**浅拷贝**只是增加了一个对被引用对象的一个指向，拷贝出的对象与原对象共用一块内存区域。
retain：只是retainCount加一，实际上还是共用一块内存
copy：不论拷贝的是不是集合对象，只要被拷贝的对象是不可变的，那就是浅拷贝，仅仅retainCount加一

**深拷贝**会分配出一块内存，然后将引用的内容拷贝进去，也就是说拷贝出来的对象与原对象是独立的。
copy：拷贝可变对象则是深拷贝
mutableCopy：不论被拷贝的是不是集合对象，是可变的还是不可变的，都是深拷贝

**注意：**如果mutableCopy的是集合对象，深拷贝的是该集合对象，不是指该集合对象里面的元素，称之为**单层深拷贝**，对于集合对象内的元素依然是指针拷贝

**总结**
copy：只要copy的是**不可变**对象，都是浅拷贝，copy**可变集合**象则是单层深拷贝，拷贝**可变非集合**对象则是深拷贝
mutableCopy：拷贝**集合**象则是单层深拷贝，拷贝**非集**合对象则是深拷贝
